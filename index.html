<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>M&M-COMMUNITY - Admin Modus</title>
    <style>
        /* BASIS-LAYOUT */
        body { background-color: #000; color: #fff; font-family: 'Segoe UI', Arial, sans-serif; margin: 0; padding: 0; display: flex; flex-direction: column; align-items: center; height: 100vh; overflow: hidden; }

        /* ANIMATIONEN */
        @keyframes kenburns { 0% { transform: scale(1) translate(0, 0); } 50% { transform: scale(1.15) translate(-1%, -1%); } 100% { transform: scale(1) translate(0, 0); } }
        @keyframes fadeEffect { 0% { opacity: 0; } 15% { opacity: 0.4; } 85% { opacity: 0.4; } 100% { opacity: 0; } }
        @keyframes signalBlink { 0% { box-shadow: 0 0 5px #fff; opacity: 0.8; } 50% { box-shadow: 0 0 25px #fff, 0 0 35px #003d8f; opacity: 1; transform: scale(1.05); } 100% { box-shadow: 0 0 5px #fff; opacity: 0.8; } }
        .elite-aktiv { background-color: #ffd700 !important; box-shadow: 0 0 10px #ffd700; border: 2px solid #fff !important; cursor: pointer; }
        @keyframes pulsieren { 0% { opacity: 0.5; } 50% { opacity: 1; text-shadow: 0 0 10px #ffd700; } 100% { opacity: 0.5; } }
        .pulsieren { animation: pulsieren 2s infinite ease-in-out; font-weight: bold; }
        .signal-aktiv { animation: signalBlink 1.0s infinite ease-in-out !important; border: 2px solid #fff !important; cursor: pointer; }

        /* HEADER & TAFEL */
        .dashboard-header { width: 100%; position: absolute; top: 3%; display: flex; justify-content: flex-start; padding: 0 2%; box-sizing: border-box; z-index: 20; }
        .logo-ring { width: 110px; height: 110px; border: 3px solid #fff; background-color: #003d8f; border-radius: 50%; display: flex; flex-direction: column; justify-content: center; align-items: center; cursor: pointer; }
        .logo-mm { font-size: 2rem; font-weight: 900; line-height: 0.8; }
        .logo-community { font-size: 0.6rem; letter-spacing: 1.5px; text-transform: uppercase; font-weight: bold; }
        .info-section { width: 80%; height: 26vh; border: 2px solid #003d8f; display: flex; flex-direction: column; justify-content: center; align-items: center; background-color: #000; position: relative; overflow: hidden; margin-top: 2vh; }
        
        .tafel-layout { display: flex; align-items: center; justify-content: center; width: 100%; position: relative; margin-top: 1vh; height: 26vh; min-height: 26vh; flex-shrink: 0; }
        .info-section-ebene { width: 90% !important; height: 100%; border: 2px solid #003d8f; background-color: #000; position: relative; overflow: hidden; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 10; }

        /* BUTTONS */
        .buttons-links { position: absolute; left: 1.5%; display: flex; flex-direction: column; gap: 15px; z-index: 20; }
        .buttons-rechts { position: absolute; right: 1.5%; display: flex; flex-direction: column; gap: 15px; z-index: 20; }
        .oval-side { width: 45px; height: 22px; border-radius: 12px; border: 1px solid #fff; opacity: 0.8; transition: all 0.3s; }
        .ov-schwarz { background: #000; border: 1.5px solid #003d8f; }
        .ov-grun { background: #00ff00; }
        .ov-blau { background: #0000ff; }
        .ov-rot { background: #ff0000; }
        .ov-pink { background: #ff00ff; }
        .ov-gelb { background: #ffff00; }

        /* GRID */
        .grid { display: grid; grid-template-columns: repeat(4, 1fr); grid-template-rows: repeat(5, 1fr); grid-auto-flow: column; gap: 10px; width: 95%; max-width: 1450px; margin-top: 30px; border: 3px solid #00ff00; padding: 15px; border-radius: 10px; }
        .box, .fundament-box { display: flex; border: 2px solid #003d8f; background-color: #000; min-height: 58px; position: relative; overflow: hidden; }
        .num { width: 38px; display: flex; align-items: center; justify-content: center; background-color: #003d8f; font-weight: bold; flex-shrink: 0; font-size: 0.85rem; }
        .text { padding: 4px 8px; text-transform: uppercase; font-size: 0.6rem; display: flex; align-items: center; cursor: pointer; flex-grow: 1; font-weight: 600; }

        /* CHAT */
        #chat-area { width: 90% !important; height: 45vh; flex-grow: 1; display: none; flex-direction: column; margin: 0 auto 70px auto; position: relative; overflow: hidden; mask-image: linear-gradient(to bottom, transparent 0%, black 15%, black 100%); -webkit-mask-image: linear-gradient(to bottom, transparent 0%, black 15%, black 100%); }
        .chat-msgs { flex: 1; display: flex; flex-direction: column; justify-content: flex-end; padding: 10px 0; color: #fff; font-size: 1.1rem; overflow-y: auto; scrollbar-width: none; }
        .chat-msgs::-webkit-scrollbar { width: 0px; }
        .chat-input-row { display: flex; border: 1px solid #003d8f; background: rgba(0, 0, 0, 0.9); padding: 5px; border-radius: 4px; margin-top: 5px; z-index: 10; }

        /* EBENE 4 */
        #drawer-ebene4 { overflow-y: auto; padding-right: 5px; width: 90%; display: none; flex-direction: column; height: 60vh; }
        .video-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; width: 100%; margin-bottom: 20px; }
        .video-slot { aspect-ratio: 16/9; background: #111; border: 1px solid #003d8f; display: flex; align-items: center; justify-content: center; font-size: 0.7rem; color: #666; position: relative; }
        
        .schublade { border: 1px solid #003d8f; margin-bottom: 10px; background: #050505; }
        .schublade-header { padding: 15px; font-size: 1rem; font-weight: bold; cursor: pointer; display: flex; justify-content: space-between; background: #001a3d; border-bottom: 1px solid #003d8f; }
        .schublade-content { padding: 0 15px; max-height: 0; overflow: hidden; transition: max-height 0.5s ease-in-out; }
        .schublade.open .schublade-content { max-height: 1200px; padding: 20px; }
        .schublade-textarea { width: 100%; height: 350px; background: #111; border: 1px solid #003d8f; color: #fff; padding: 15px; margin-top: 15px; font-family: inherit; resize: vertical; }
        .save-btn { background: #00ff00; color: #000; border: none; padding: 10px 20px; font-weight: bold; cursor: pointer; margin-top: 10px; }

        /* NAV */
        .bottom-nav { display: flex; justify-content: space-between; width: 100%; padding: 10px 20px; position: fixed; bottom: 0; left: 0; background: #000; z-index: 100; border-top: 1px solid #333; }
        .nav-btn { background: #ffd700; color: #000; border: none; padding: 10px 20px; font-weight: bold; cursor: pointer; border-radius: 5px; }
        .dot { width: 10px; height: 10px; background: #444; border-radius: 50%; }
        .dot.active { background: #ffd700; box-shadow: 0 0 10px #ffd700; }

        #counter-box { position: absolute; right: 0; top: 0; width: 100px; padding: 5px; border-left: 2px solid #003d8f; border-bottom: 2px solid #003d8f; background: #000; text-align: center; display: none; z-index: 100; }
        .ebene4-header-red { width: 90%; background: #ff0000; color: #fff; padding: 10px 0; text-align: center; font-weight: 900; font-size: 1.5rem; display: none; text-transform: uppercase; }

        .num-neutral { background-color: #003d8f !important; }
        .num-gelesen { background-color: #ffd700 !important; color: #000 !important; }
        .num-fertig { background-color: #00ff00 !important; color: #000 !important; }

        .werbe-bild-bg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-size: cover; background-position: center; opacity: 0; z-index: 1; }
        .bild-aktiv { animation: kenburns 20s infinite ease-in-out, fadeEffect 10s infinite; }
    </style>
</head>
<body>

    <div id="dashboard" style="width: 100%; display: flex; flex-direction: column; align-items: center;">
        <div class="dashboard-header">
            <div class="logo-ring" ondblclick="adminUnlock()"><div class="logo-mm">M&M</div><div class="logo-community">COMMUNITY</div></div>
        </div>
        <div class="info-section">
            <h1 style="font-size: 2.8rem; margin: 0; font-weight: 900;">DAS WAS & WARUM</h1>
            <h2 style="color: #003d8f; font-size: 1.8rem; margin: 5px 0;">DIE STILLE MILLION</h2>
            <p style="max-width: 85%; color: #ccc; font-size: 1.1rem; margin: 10px 0; text-align: center;">Die Wahl der Vorsitzenden erfolgt erst nach Erreichen der stillen Million.</p>
        </div>
        <div class="grid" id="main-grid"></div>
        <div class="fundament-container" style="display: flex; width: 95%; max-width: 1450px; gap: 10px; margin-top: 10px;">
            <div class="fundament-box" style="flex: 1;"><div class="num">21</div><div class="text">Kapital und Verwaltung</div></div>
            <div class="fundament-box" style="flex: 1;"><div class="num">22</div><div class="text">DAS KOLLEKTIV</div></div>
        </div>
        <div class="zugang-container" style="display: flex; width: 95%; max-width: 1450px; gap: 10px; margin-top: 10px; margin-bottom: 80px;">
            <div class="fundament-box" style="flex: 1; cursor: pointer;" onclick="showZugangInfo('gast')"><div class="num" style="background:#333;">G</div><div class="text">Gast-Zugang</div></div>
            <div class="fundament-box" style="flex: 1; border-color: #8b00ff; cursor: pointer;" onclick="showZugangInfo('email')"><div class="num" style="background:#8b00ff;">V</div><div class="text" style="color: #ffd700;">Verifizierter Status</div></div>
        </div>
    </div>

    <div id="video-wahl-modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.95); z-index:20000; flex-direction:column; align-items:center; justify-content:center;">
        <h1 style="color:#ff0000;">WÄHLE DEINEN VIDEO-RAUM</h1>
        <div id="wahl-liste" style="display:grid; grid-template-columns: repeat(4, 1fr); gap:10px; width:90%; padding:20px;"></div>
        <button onclick="document.getElementById('video-wahl-modal').style.display='none'" class="nav-btn">ZURÜCK</button>
    </div>

    <div id="zugang-modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); z-index:10000; justify-content:center; align-items:center;">
        <div style="background:#000; border:2px solid #003d8f; padding:30px; width:400px; text-align:center;">
            <h3 id="modal-titel"></h3>
            <p id="modal-text"></p>
            <div id="email-input-field" style="display:none; margin-bottom:20px;"><input type="email" id="user-email-input" style="width:90%; padding:10px;"></div>
            <button id="modal-confirm-btn" class="nav-btn">AKZEPTIEREN</button>
        </div>
    </div>

    <div id="page-skelett" style="display: none; width: 100%; flex-direction: column; align-items: center; height: 100vh;">
        <div class="top-container" style="width:100%; display:flex; flex-direction:column; align-items:center;">
            <h1 id="info-titel" class="page-title-white" style="text-transform:uppercase; font-size:1.8rem; margin:10px 0;"></h1>
            <div id="ebene4-title-red" class="ebene4-header-red"></div>
            <div class="tafel-layout">
                <div class="buttons-links">
                    <div class="oval-side ov-schwarz" id="sig-l1"></div>
                    <div class="oval-side ov-grun"></div><div class="oval-side ov-blau"></div>
                    <div class="oval-side ov-rot" id="sig-l4" onclick="portalZuEbene4()"></div>
                </div>
                <div class="info-section-ebene">
                    <div class="werbe-bild-bg" id="werbe-bg"></div>
                    <div id="counter-box"><span style="font-size:0.4rem; color:#fff; display:block;">STILLE MILLION</span><span class="counter-value">842.336</span></div>
                </div>
                <div class="buttons-rechts">
                    <div class="oval-side ov-grun"></div><div class="oval-side ov-blau"></div><div class="oval-side ov-pink"></div>
                    <div class="oval-side ov-gelb" id="sig-r4" onclick="portalZuEbene3()"></div>
                </div>
            </div>
        </div>

        <p id="main-text" style="width: 85%; color: #ccc; margin-top: 2vh; font-size: 1.3rem; line-height: 1.8;"></p>

        <div id="chat-area">
            <div class="chat-msgs" id="chat-box"></div>
            <div class="chat-input-row">
                <input type="text" id="chat-input" placeholder="Nachricht..." style="flex:1; background:transparent; border:none; color:#fff; padding:10px;" onkeypress="if(event.key==='Enter') registriereSenden()">
                <button onclick="registriereSenden()" class="nav-btn">SENDEN</button>
            </div>
        </div> 

        <div id="drawer-ebene4">
            <div class="video-grid" id="v-grid"></div>
            <div id="sektoren-schubladen"></div>
        </div> 

        <div id="ebene5-bereich" style="display:none;"><div class="freie-zone-text">ADMIN ZONE</div></div>

        <div class="bottom-nav">
            <button id="btn-back" class="nav-btn" onclick="showDashboard()">← Dashboard</button>
            <div style="display: flex; gap: 8px; align-items: center;" id="dot-holder"></div>
            <button id="btn-next" class="nav-btn" onclick="nextPage()">Weiter →</button>
        </div>
    </div>

<script>
    let userBackstage = { isVerifiziert: false, isQualifiziert: false };
    const themen = ["Recht auf Gefühls Forderung", "Wie werde ich Mensch", "Glaube an Friede", "Programm für Bürgerliche Rechte", "Moralische Pflicht und Verantwortung", "Menschlichkeit Wiederherstellung", "Kinderschutz-Pflicht-Elternrechte", "Wahre Richtung und Kunst", "LGBTQ und Kirche", "Trend and Tradition", "Religionsbekenntnis oder Selbstwahl", "Gesundheitswesen und Verhalten", "Arbeitswelt und Du", "Mobbing am Arbeitsplatz", "Jugendsprecher", "Ratgeber für Pensionisten", "Sozialgefallen und Widerkehr", "Nachbarschaft und Gemeinschaft", "Mensch und Technik", "Die Brücke"];
    let ebene = 1, tId = 0, aktuellesThema = "", geleseneThemen = new Set(), interaktionsZaehler = {};
    themen.forEach((t, i) => { interaktionsZaehler[i] = 0; });

    // Grid Init
    const grid = document.getElementById('main-grid');
    themen.forEach((t, i) => { grid.innerHTML += `<div class="box"><div class="num num-neutral" id="num-${i}">${i+1}</div><div class="text" onclick="checkAccess(${i}, '${t}')">${t}</div></div>`; });
    
    // Schubladen Init
    const drawerArea = document.getElementById('sektoren-schubladen');
    themen.forEach((t, i) => {
        drawerArea.innerHTML += `<div class="schublade" id="drawer-${i}"><div class="schublade-header" onclick="toggleDrawer(${i})"><span>SEKTOR ${i+1}: ${t}</span><span id="arrow-${i}">▼</span></div><div class="schublade-content"><textarea id="note-${i}" class="schublade-textarea" placeholder="Hier tippen..."></textarea><br><button class="save-btn" onclick="saveNote(${i})">DOKUMENT SICHERN</button></div></div>`;
    });

    // Dots Init
    const dots = document.getElementById('dot-holder');
    for(let i=1; i<=7; i++) dots.innerHTML += `<div id="dot${i}" class="dot ${i===1?'active':''}"></div>`;

    function checkAccess(id, t) {
        if (userBackstage.isVerifiziert || geleseneThemen.has(id) || id === 0 || geleseneThemen.size >= id) { showInfo(t, id); } 
        else { alert("Bitte der Reihe nach!"); }
    }

    function showInfo(t, id) { 
        tId = id; aktuellesThema = t; ebene = 2; geleseneThemen.add(id);
        document.getElementById('dashboard').style.display = 'none'; 
        document.getElementById('page-skelett').style.display = 'flex'; 
        updateUI(); 
    }

    function updateUI() {
        const isEbene2 = (ebene === 2), isChat = (ebene === 3), isVideo = (ebene === 4);
        document.getElementById('main-text').style.display = isEbene2 ? 'block' : 'none';
        document.getElementById('chat-area').style.display = isChat ? 'flex' : 'none';
        document.getElementById('drawer-ebene4').style.display = isVideo ? 'flex' : 'none';
        
        // Navigation Logik
        const btnNext = document.getElementById('btn-next');
        const btnBack = document.getElementById('btn-back');
        const redBar = document.getElementById('ebene4-title-red');
        const sigGelb = document.getElementById('sig-r4');

        if (isEbene2) {
            document.getElementById('info-titel').innerText = aktuellesThema;
            document.getElementById('main-text').innerText = "Inhalt für " + aktuellesThema + "...";
            
            // DIE BRÜCKE LOGIK
            if (tId === 19) {
                btnNext.style.visibility = "hidden";
                btnBack.innerText = "← ZUM DASHBOARD";
            } else {
                btnNext.style.visibility = "visible";
                btnBack.innerText = "← Dashboard";
            }
            // Gelbes Licht Signal
            sigGelb.classList.toggle('signal-aktiv', geleseneThemen.size === 20);
        } else {
            btnNext.style.visibility = "visible";
            btnBack.innerText = "← Dashboard";
        }

        if (isVideo) {
            redBar.style.display = 'block';
            redBar.innerText = `SEKTOR: ${aktuellesThema}`;
        } else { redBar.style.display = 'none'; }

        updateDots(); updateNumColors(); startRotation();
    }

    function nextPage() { 
        if (ebene === 2 && tId < 19) { tId++; aktuellesThema = themen[tId]; geleseneThemen.add(tId); updateUI(); } 
        else if (ebene !== 2) { ebene++; updateUI(); }
    }

    function showDashboard() { ebene = 1; document.getElementById('page-skelett').style.display = 'none'; document.getElementById('dashboard').style.display = 'flex'; updateNumColors(); }
    function toggleDrawer(id) { document.querySelectorAll('.schublade').forEach((s, idx) => s.classList.toggle('open', idx === id && !s.classList.contains('open'))); }
    function saveNote(id) { alert("Gesichert."); }

    function showZugangInfo(typ) {
        const modal = document.getElementById('zugang-modal');
        document.getElementById('email-input-field').style.display = (typ==='email'?'block':'none');
        document.getElementById('modal-titel').innerText = (typ==='email'?'Verifiziert':'Gast');
        modal.style.display = 'flex';
        document.getElementById('modal-confirm-btn').onclick = () => {
            if(typ==='email') userBackstage.isVerifiziert = true;
            modal.style.display = 'none';
            updateUI();
        };
    }

    function portalZuEbene3() { if (document.getElementById('sig-r4').classList.contains('signal-aktiv')) { ebene = 3; updateUI(); } }
    function portalZuEbene4() { if (document.getElementById('sig-l4').classList.contains('signal-aktiv')) { ebene = 4; updateUI(); } }

    function updateNumColors() {
        themen.forEach((_, i) => {
            const n = document.getElementById(`num-${i}`);
            if (n) {
                if (interaktionsZaehler[i] >= 20) n.className = "num num-fertig";
                else if (geleseneThemen.has(i)) n.className = "num num-gelesen";
                else n.className = "num num-neutral";
            }
        });
    }

    function updateDots() { for(let i=1; i<=7; i++) document.getElementById('dot'+i).classList.toggle('active', i === ebene); }
    function startRotation() { 
        const bg = document.getElementById('werbe-bg'); 
        bg.style.backgroundImage = `url('https://picsum.photos/seed/${tId+ebene}/1200/600')`; 
        bg.classList.add('bild-aktiv'); 
    }
    function adminUnlock() { userBackstage.isQualifiziert = true; userBackstage.isVerifiziert = true; alert("Admin Aktiv"); }
</script>
</body>
</html>
