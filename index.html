<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>M&M-COMMUNITY - Das Fundament</title>
    <style>
        /* VOLLSTÄNDIGES BASIS-LAYOUT AUS CODE 1 */
        body { background-color: #000; color: #fff; font-family: 'Segoe UI', Arial, sans-serif; margin: 0; padding: 0; display: flex; flex-direction: column; align-items: center; height: 100vh; overflow: hidden; }

        /* ANIMATIONEN */
        @keyframes kenburns { 0% { transform: scale(1) translate(0, 0); } 50% { transform: scale(1.15) translate(-1%, -1%); } 100% { transform: scale(1) translate(0, 0); } }
        @keyframes fadeEffect { 0% { opacity: 0; } 15% { opacity: 0.4; } 85% { opacity: 0.4; } 100% { opacity: 0; } }

        /* HEADER & LOGO */
        .dashboard-header { width: 100%; position: absolute; top: 3%; display: flex; justify-content: flex-start; padding: 0 2%; box-sizing: border-box; z-index: 20; }
        .logo-ring { width: 110px; height: 110px; border: 3px solid #fff; background-color: #003d8f; border-radius: 50%; display: flex; flex-direction: column; justify-content: center; align-items: center; }
        .logo-mm { font-size: 2rem; font-weight: 900; line-height: 0.8; }
        .logo-community { font-size: 0.6rem; letter-spacing: 1.5px; text-transform: uppercase; font-weight: bold; }

        /* TAFEL & BUTTONS SEITE */
        .info-section { width: 80%; height: 26vh; border: 2px solid #003d8f; display: flex; flex-direction: column; justify-content: center; align-items: center; background-color: #000; position: relative; overflow: hidden; margin-top: 2vh; }
        .tafel-layout { display: flex; align-items: center; justify-content: center; width: 100%; position: relative; margin-top: 1vh; height: 26vh; flex-shrink: 0; }
        .info-section-ebene { width: 90% !important; height: 100%; border: 2px solid #003d8f; background-color: #000; position: relative; overflow: hidden; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 10; box-shadow: 0 0 15px rgba(0, 61, 143, 0.5); }
        .buttons-links, .buttons-rechts { position: absolute; display: flex; flex-direction: column; gap: 15px; z-index: 20; }
        .buttons-links { left: 1.5%; } .buttons-rechts { right: 1.5%; }
        .oval-side { width: 45px; height: 22px; border-radius: 12px; border: 1px solid #fff; opacity: 0.8; }
        .ov-grun { background: #00ff00; } .ov-blau { background: #0000ff; } .ov-rot { background: #ff0000; } .ov-pink { background: #ff00ff; } .ov-gelb { background: #ffff00; }

        /* GRID */
        .grid { display: grid; grid-template-columns: repeat(4, 1fr); grid-template-rows: repeat(5, 1fr); grid-auto-flow: column; gap: 10px; width: 95%; max-width: 1450px; margin-top: 30px; border: 3px solid #00ff00; padding: 15px; border-radius: 10px; }
        .box, .fundament-box { display: flex; border: 2px solid #003d8f; background-color: #000; min-height: 58px; position: relative; overflow: hidden; }
        .num { width: 38px; display: flex; align-items: center; justify-content: center; background-color: #003d8f; font-weight: bold; flex-shrink: 0; font-size: 0.85rem; }
        .num-fertig { background-color: #00ff00 !important; color: #000 !important; } /* Gold/Grün bei Erfolg */
        .text { padding: 4px 8px; text-transform: uppercase; font-size: 0.6rem; display: flex; flex-direction: column; justify-content: center; cursor: pointer; flex-grow: 1; font-weight: 600; }
        .progress-mini { font-size: 0.5rem; color: #00ff00; margin-top: 2px; }

        /* CHAT & EBENE 4 */
        #chat-area, #drawer-ebene4 { width: 90% !important; flex-grow: 1; display: none; flex-direction: column; margin-top: 5px; margin-bottom: 70px; }
        .chat-msgs { flex: 1; padding: 10px; overflow-y: auto; color: #fff; background: rgba(0,0,0,0.5); border: 1px solid #003d8f; margin-bottom: 5px; }
        .chat-input-row { display: flex; border: 1px solid #003d8f; background: rgba(0, 0, 0, 0.9); padding: 5px; }
        .ebene4-header-red { width: 90%; background: #ff0000; color: #fff; padding: 10px 0; text-align: center; font-weight: 900; font-size: 1.5rem; border-radius: 5px 5px 0 0; display: none; }

        /* NAV */
        .bottom-nav { display: flex; justify-content: space-between; width: 100%; padding: 10px 20px; position: fixed; bottom: 0; background: #000; z-index: 100; }
        .nav-btn { background: #ffd700; color: #000; border: none; padding: 10px 20px; font-weight: bold; cursor: pointer; border-radius: 5px; }
        .dot { width: 10px; height: 10px; background: #444; border-radius: 50%; }
        .dot.active { background: #ffd700; box-shadow: 0 0 10px #ffd700; }
        
        .werbe-bild-bg { position: absolute; width: 100%; height: 100%; background-size: cover; opacity: 0; }
        .bild-aktiv { animation: kenburns 20s infinite ease-in-out, fadeEffect 10s infinite; }
    </style>
</head>
<body>

    <div id="dashboard">
        <div class="dashboard-header"><div class="logo-ring"><div class="logo-mm">M&M</div><div class="logo-community">COMMUNITY</div></div></div>
        <div class="info-section">
            <h1 style="font-size: 2.8rem; margin: 0; font-weight: 900;">DAS WAS & WARUM</h1>
            <h2 style="color: #003d8f; font-size: 1.8rem; margin: 5px 0;">DIE STILLE MILLION</h2>
            <p style="max-width: 85%; color: #ccc; text-align: center;">Die Wahl der Vorsitzenden erfolgt erst nach Erreichen der stillen Million.</p>
        </div>
        <div class="grid" id="main-grid"></div>
        <div style="display: flex; width: 95%; max-width: 1450px; gap: 10px; margin-top: 10px; margin-bottom: 80px;">
            <div class="fundament-box" style="flex: 1;"><div class="num">21</div><div class="text">Kapital und Verwaltung</div></div>
            <div class="fundament-box" style="flex: 1;"><div class="num">22</div><div class="text">DAS KOLLEKTIV</div></div>
        </div>
    </div>

    <div id="page-skelett" style="display: none; width: 100%; flex-direction: column; align-items: center; height: 100vh;">
        <h1 id="info-titel" style="text-transform: uppercase; font-size: 1.8rem; margin: 1vh 0; font-weight: 900;"></h1>
        <div id="ebene4-title-red" class="ebene4-header-red">DER VIDEO-BEWEIS</div>
        <div class="tafel-layout">
            <div class="buttons-links"><div class="oval-side ov-grun"></div><div class="oval-side ov-blau"></div><div class="oval-side ov-rot"></div></div>
            <div class="info-section-ebene">
                <div class="werbe-bild-bg" id="werbe-bg"></div>
                <span style="z-index: 5; color: rgba(255,255,255,0.3);">PLATZ FÜR WERBUNG</span>
            </div>
            <div class="buttons-rechts"><div class="oval-side ov-grun"></div><div class="oval-side ov-pink"></div><div class="oval-side ov-gelb"></div></div>
        </div>
        <p id="main-text" style="width: 85%; color: #ccc; margin-top: 2vh; font-size: 1.3rem; overflow-y: auto; max-height: 40vh;"></p>
        
        <div id="chat-area">
            <div class="chat-msgs" id="chat-box"><i>System: Dialog bereit...</i></div>
            <div class="chat-input-row">
                <input type="text" id="chat-input" placeholder="Nachricht..." style="flex:1; background:transparent; border:none; color:#fff; padding:15px;">
                <button onclick="sendeNachricht()" style="background:#003d8f; color:#fff; border:none; padding:0 30px; font-weight:bold; cursor:pointer;">SENDEN</button>
            </div>
        </div>

        <div id="drawer-ebene4">
            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px;">
                <div style="aspect-ratio: 16/9; background: #111; border: 1px solid #003d8f; display: flex; align-items: center; justify-content: center; font-size: 0.7rem; color: #444;">VIDEO 1 (DU)</div>
                </div>
        </div>
    </div>

    <div class="bottom-nav">
        <button id="btn-back" class="nav-btn" style="visibility: hidden;" onclick="showDashboard()">← Dashboard</button>
        <div style="display: flex; gap: 8px; align-items: center;" id="dot-holder"></div>
        <button id="btn-next" class="nav-btn" style="visibility: hidden;" onclick="nextPage()">Weiter →</button>
    </div>

    <script>
        const themen = ["Recht auf Gefühls Forderung", "Wie werde ich Mensch", "Glaube an Friede", "Programm für Bürgerliche Rechte", "Moralische Pflicht und Verantwortung", "Menschlichkeit Wiederherstellung", "Kinderschutz-Pflicht-Elternrechte", "Wahre Richtung und Kunst", "LGBTQ und Kirche", "Trend und Tradition", "Religionsbekenntnis oder Selbstwahl", "Gesundheitswesen und Verhalten", "Arbeitswelt und Du", "Mobbing am Arbeitsplatz", "Jugendsprecher", "Ratgeber für Pensionisten", "Sozialgefallen und Widerkehr", "Nachbarschaft und Gemeinschaft", "Mensch und Technik", "Die Brücke"];
        let ebene = 1, tId = 0, interaktionsZaehler = {}, wechselInterval;
        themen.forEach((_, i) => interaktionsZaehler[i] = 0);

        function renderGrid() {
            const grid = document.getElementById('main-grid'); grid.innerHTML = '';
            themen.forEach((t, i) => {
                const fertig = interaktionsZaehler[i] >= 20;
                grid.innerHTML += `<div class="box"><div class="num ${fertig?'num-fertig':''}" id="num-${i}">${i+1}</div><div class="text" onclick="showInfo('${t}', ${i})">${t}<div class="progress-mini" id="prog-${i}">${interaktionsZaehler[i]}/20</div></div></div>`;
            });
        }

        function showInfo(t, id) {
            tId = id; ebene = 2;
            document.getElementById('dashboard').style.display = 'none';
            document.getElementById('page-skelett').style.display = 'flex';
            document.getElementById('btn-back').style.visibility = 'visible';
            updateUI();
        }

        function updateUI() {
            const isChat = ebene === 3; const isVideo = ebene === 4;
            document.getElementById('chat-area').style.display = isChat ? 'flex' : 'none';
            document.getElementById('drawer-ebene4').style.display = isVideo ? 'flex' : 'none';
            document.getElementById('ebene4-title-red').style.display = isVideo ? 'block' : 'none';
            document.getElementById('info-titel').style.display = isVideo ? 'none' : 'block';
            document.getElementById('info-titel').innerText = themen[tId];
            document.getElementById('main-text').style.display = (ebene === 2) ? 'block' : 'none';
            document.getElementById('main-text').innerText = "Inhalt für " + themen[tId];
            
            const btnNext = document.getElementById('btn-next');
            btnNext.style.visibility = (ebene === 3 && interaktionsZaehler[tId] < 20) ? 'hidden' : 'visible';
            btnNext.innerText = (ebene === 2) ? "Dialog →" : (ebene === 3) ? "Video-Beweis →" : "Weiter →";

            const dots = document.getElementById('dot-holder'); dots.innerHTML = '';
            for(let i=1; i<=7; i++) dots.innerHTML += `<div class="dot ${i===ebene?'active':''}"></div>`;
            startRotation();
        }

        function sendeNachricht() {
            const input = document.getElementById('chat-input');
            const box = document.getElementById('chat-box');
            if(!input.value.trim()) return;
            box.innerHTML += `<div style="color:#00ff00;"><b>Du:</b> ${input.value}</div>`;
            input.value = '';
            if(interaktionsZaehler[tId] < 20) {
                interaktionsZaehler[tId]++;
                box.innerHTML += `<div style="color:#ffd700;font-size:0.8rem;"><i>System: Interaktion ${interaktionsZaehler[tId]}/20</i></div>`;
                document.getElementById(`prog-${tId}`).innerText = `${interaktionsZaehler[tId]}/20`;
            }
            if(interaktionsZaehler[tId] === 20) updateUI();
            box.scrollTop = box.scrollHeight;
        }

        function nextPage() { if(ebene < 7) { ebene++; updateUI(); } }
        function showDashboard() { document.getElementById('page-skelett').style.display = 'none'; document.getElementById('dashboard').style.display = 'flex'; renderGrid(); }

        function startRotation() {
            clearInterval(wechselInterval);
            const bg = document.getElementById('werbe-bg');
            bg.style.backgroundImage = `url('https://picsum.photos/seed/${tId+ebene}/1200/600')`;
            bg.classList.add('bild-aktiv');
            wechselInterval = setInterval(() => {
                bg.classList.remove('bild-aktiv');
                setTimeout(() => { bg.style.backgroundImage = `url('https://picsum.photos/seed/${Math.random()}/1200/600')`; bg.classList.add('bild-aktiv'); }, 50);
            }, 10000);
        }

        renderGrid();
    </script>
</body>
</html>
