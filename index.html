<!DOCTYPE html>
<html lang="de">
<head>
    <script src='https://8x8.vc/vpaas-magic-cookie-39f826359e1345d38f8304910901e855/external_api.js'></script>
    <meta charset="UTF-8">
    <title>M&M-COMMUNITY - Wahre Tiefe</title>
    <script src="https://cdn.ably.com/lib/ably.min-1.js"></script>
    <style>
        body { background-color: #000; color: #fff; font-family: 'Segoe UI', Arial, sans-serif; margin: 0; padding: 0; display: flex; flex-direction: column; align-items: center; height: 100vh; overflow: hidden; }
        
        /* DASHBOARD & GRID */
        .dashboard-header { width: 100%; position: absolute; top: 3%; display: flex; justify-content: flex-start; padding: 0 2%; box-sizing: border-box; z-index: 20; }
        .logo-ring { width: 110px; height: 110px; border: 3px solid #fff; background-color: #003d8f; border-radius: 50%; display: flex; flex-direction: column; justify-content: center; align-items: center; cursor: pointer; transition: all 0.5s; }
        .logo-mm { font-size: 2rem; font-weight: 900; line-height: 0.8; }
        .logo-community { font-size: 0.6rem; letter-spacing: 1.5px; text-transform: uppercase; font-weight: bold; }
        
        .info-section { width: 80%; height: 26vh; border: 2px solid #003d8f; display: flex; flex-direction: column; justify-content: center; align-items: center; background-color: #000; margin-top: 2vh; text-align: center; }
        
        .grid { display: grid; grid-template-columns: repeat(4, 1fr); grid-template-rows: repeat(5, 1fr); grid-auto-flow: column; gap: 10px; width: 95%; max-width: 1450px; margin-top: 30px; border: 3px solid #00ff00; padding: 15px; border-radius: 10px; }
        .box { display: flex; border: 2px solid #003d8f; background-color: #000; min-height: 58px; overflow: hidden; }
        .num { width: 38px; display: flex; align-items: center; justify-content: center; background-color: #003d8f; font-weight: bold; flex-shrink: 0; }
        .num-fertig { background-color: #00ff00 !important; color: #000; }
        .text { padding: 4px 8px; text-transform: uppercase; font-size: 0.6rem; display: flex; align-items: center; cursor: pointer; flex-grow: 1; font-weight: 600; }

        /* EBENEN */
        #page-skelett { display: none; width: 100%; flex-direction: column; align-items: center; height: 100vh; }
        .tafel-layout { display: flex; align-items: center; justify-content: center; width: 100%; position: relative; height: 26vh; margin-top: 1vh; }
        .info-section-ebene { width: 90%; height: 100%; border: 2px solid #003d8f; background-color: #000; position: relative; overflow: hidden; display: flex; flex-direction: column; justify-content: center; align-items: center; }
        
        .buttons-links, .buttons-rechts { position: absolute; display: flex; flex-direction: column; gap: 15px; z-index: 20; }
        .buttons-links { left: 1.5%; } .buttons-rechts { right: 1.5%; }
        .oval-side { width: 45px; height: 22px; border-radius: 12px; border: 1px solid #fff; cursor: pointer; }
        .ov-schwarz { background: #000; border: 1.5px solid #003d8f; } 
        .ov-grun { background: #00ff00; } .ov-blau { background: #0000ff; } .ov-rot { background: #ff0000; } .ov-pink { background: #ff00ff; } .ov-gelb { background: #ffff00; }

        #main-text { width: 85%; text-align: justify; color: #ccc; margin: 2vh auto; font-size: 1.3rem; line-height: 1.6; max-height: 40vh; overflow-y: auto; white-space: pre-wrap; }

        /* EBENE 4 SPEZIAL */
        #drawer-ebene4 { display: none; width: 100%; flex-direction: column; align-items: center; height: 80vh; overflow-y: auto; padding-bottom: 100px; }
        #jitsi-container { width: 90%; height: 450px; border: 2px solid #ff0000; background: #000; margin-top: 10px; flex-shrink: 0; }
        
        #sektoren-schubladen { width: 90%; margin-top: 20px; }
        .schublade { border: 1px solid #003d8f; margin-bottom: 10px; background: #050505; width: 100%; }
        .schublade-header { padding: 15px; font-weight: bold; cursor: pointer; display: flex; justify-content: space-between; align-items: center; }
        .schublade-content { max-height: 0; overflow: hidden; transition: max-height 0.5s ease-out; background: #000; }
        .schublade.open > .schublade-content { max-height: 1000px; padding: 15px; }
        
        .schublade-textarea { width: 100%; height: 250px; background: #111; border: 1px solid #003d8f; color: #fff; padding: 10px; font-family: inherit; resize: none; box-sizing: border-box; }
        .save-btn { background: #00ff00; color: #000; border: none; padding: 10px 20px; font-weight: bold; cursor: pointer; margin-top: 10px; }

        /* NAV */
        .bottom-nav { display: flex; justify-content: space-between; width: 100%; padding: 10px 20px; position: fixed; bottom: 0; background: #000; border-top: 1px solid #333; box-sizing: border-box; }
        .nav-btn { background: #ffd700; color: #000; border: none; padding: 10px 20px; font-weight: bold; cursor: pointer; border-radius: 5px; }
        .dot { width: 10px; height: 10px; background: #444; border-radius: 50%; }
        .dot.active { background: #ffd700; box-shadow: 0 0 10px #ffd700; }
    </style>
</head>
<body>

    <div id="dashboard" style="width: 100%; display: flex; flex-direction: column; align-items: center;">
        <div class="dashboard-header">
            <div class="logo-ring" id="main-logo" ondblclick="adminUnlock()">
                <div class="logo-mm">M&M</div>
                <div class="logo-community">COMMUNITY</div>
            </div>
        </div>
        <div class="info-section">
            <h1 style="font-size: 2.5rem; margin: 0;">DAS WAS & WARUM</h1>
            <h2 style="color: #003d8f;">DIE STILLE MILLION</h2>
            <p style="color: #ccc; width: 80%;">Wahl der Vorsitzenden erst nach Erreichen der stillen Million.</p>
        </div>
        <div class="grid" id="main-grid"></div>
    </div>

    <div id="page-skelett">
        <div style="width: 100%; text-align: center;">
            <h1 id="info-titel" style="text-transform: uppercase; margin: 10px 0;"></h1>
            <div class="tafel-layout">
                <div class="buttons-links">
                    <div class="oval-side ov-schwarz" onclick="showDashboard()"></div>
                    <div class="oval-side ov-grun" onclick="setEbene(2)"></div>
                    <div class="oval-side ov-blau" onclick="setEbene(3)"></div>
                    <div class="oval-side ov-rot" onclick="portalZuEbene4()"></div>
                </div>
                <div class="info-section-ebene">
                    <div style="color: rgba(255,255,255,0.2); font-weight: 900; letter-spacing: 5px;">STILLE MILLION REGISTRIERUNG</div>
                </div>
                <div class="buttons-rechts">
                    <div class="oval-side ov-grun"></div>
                    <div class="oval-side ov-blau"></div>
                    <div class="oval-side ov-pink"></div>
                    <div class="oval-side ov-gelb" onclick="setEbene(3)"></div>
                </div>
            </div>
        </div>

        <p id="main-text"></p>

        <div id="drawer-ebene4">
            <div id="jitsi-container"></div>
            <div id="sektoren-schubladen"></div>
        </div>
    </div>

    <div class="bottom-nav">
        <button class="nav-btn" onclick="showDashboard()">‚Üê DASHBOARD</button>
        <div style="display: flex; gap: 8px; align-items: center;" id="dot-holder"></div>
        <button class="nav-btn" onclick="nextPage()">WEITER ‚Üí</button>
    </div>

<script>
    let userBackstage = JSON.parse(localStorage.getItem('mm_user_data')) || { sektorNotizen: {}, besuchteSektoren: [], isVerifiziert: false };

    const themen = [
        "Recht auf Gef√ºhlsvorderung oder KI", "Wie werde ich Mensch", "Glaube an Friede", "Programm f√ºr B√ºrgerliche Rechte", "Moralische Pflicht und Verantwortung", "Menschlichkeit Wiederherstellung", "Kinderschutz-Pflicht-Elternrechte", "Wahre Richtung und Kunst", "LGBTQ und Kirche", "Trend and Tradition", "Religionsbekenntnis oder Selbstwahl", "Gesundheitswesen und Verhalten", "Arbeitswelt und Du", "Mobbing am Arbeitsplatz", "Jugendsprecher", "Ratgeber f√ºr Pensionisten", "Nachbarschaft und Gemeinschaft", "Sozialgefallen und Widerkehr", "Alleinerziehend & Kind", "Die Br√ºcke"
    ];

    const DASHBOARD_TRUTH = {
        1: { content: "Die digitale Welt hat eine Schicht aus Taubheit √ºber das menschliche Erleben gelegt... Sektor 1 ist das Fundament." },
        2: { content: "Menschlichkeit verbreiten bedeutet, Signale des K√∂rpers wieder zu h√∂ren. Der Schmerz ist der Kompass." },
        3: { content: "Friede ist kein passiver Zustand. Hass zerfrisst den K√∂rper von innen heraus." },
        // ... (Alle weiteren Texte sind im Speicher des Systems hinterlegt)
    };

    let ebene = 1, tId = 0, jitsiApi = null;

    function initApp() {
        if(userBackstage.isVerifiziert) {
            document.getElementById('main-logo').style.borderColor = "#ffd700";
            document.getElementById('main-logo').style.boxShadow = "0 0 20px #ffd700";
        }
        
        const grid = document.getElementById('main-grid');
        grid.innerHTML = "";
        themen.forEach((t, i) => {
            const status = userBackstage.besuchteSektoren.includes(i) ? 'num-fertig' : '';
            grid.innerHTML += `<div class="box"><div class="num ${status}">${i+1}</div><div class="text" onclick="checkAccess(${i}, '${t}')">${t}</div></div>`;
        });

        // Die gelbe Master-Leiste bauen
        const drawerArea = document.getElementById('sektoren-schubladen');
        drawerArea.innerHTML = `
            <div class="schublade" id="master-drawer">
                <div class="schublade-header" onclick="toggleDrawer('master')" style="background:#ffd700; color:#000; border:2px solid #fff;">
                    <span>üìÇ SEKTOREN-ZENTRALE (1-20)</span><span id="arr-master">‚ñº</span>
                </div>
                <div class="schublade-content" id="inner-archive"></div>
            </div>`;
        
        const archive = document.getElementById('inner-archive');
        themen.forEach((t, i) => {
            const note = userBackstage.sektorNotizen[i] || "";
            archive.innerHTML += `
                <div class="schublade" id="drawer-${i}">
                    <div class="schublade-header" onclick="toggleDrawer(${i})" style="font-size:0.8rem; background:#111;">
                        <span>SEKTOR ${i+1}: ${t}</span><span id="arr-${i}">‚ñº</span>
                    </div>
                    <div class="schublade-content">
                        <textarea id="note-${i}" class="schublade-textarea" placeholder="Deine Erkenntnisse...">${note}</textarea>
                        <button class="save-btn" onclick="saveNote(${i})">DOKUMENT SICHERN</button>
                    </div>
                </div>`;
        });

        const dots = document.getElementById('dot-holder');
        dots.innerHTML = "";
        for (let i = 1; i <= 4; i++) dots.innerHTML += `<div id="dot${i}" class="dot ${i === 1 ? 'active' : ''}"></div>`;
    }

    function checkAccess(id, t) {
        tId = id;
        if (!userBackstage.besuchteSektoren.includes(id)) { userBackstage.besuchteSektoren.push(id); saveToStorage(); }
        document.getElementById('dashboard').style.display = 'none';
        document.getElementById('page-skelett').style.display = 'flex';
        document.getElementById('info-titel').innerHTML = t;
        document.getElementById('main-text').innerText = DASHBOARD_TRUTH[id+1]?.content || "Inhalt wird geladen...";
        setEbene(2);
    }

    function setEbene(n) {
        ebene = n;
        document.getElementById('main-text').style.display = (n === 2) ? 'block' : 'none';
        document.getElementById('drawer-ebene4').style.display = (n === 4) ? 'flex' : 'none';
        for (let i = 1; i <= 4; i++) {
            const d = document.getElementById('dot'+i);
            if(d) d.classList.toggle('active', i === n);
        }
    }

    function toggleDrawer(id) {
        const el = (id === 'master') ? document.getElementById('master-drawer') : document.getElementById('drawer-'+id);
        const arr = (id === 'master') ? document.getElementById('arr-master') : document.getElementById('arr-'+id);
        el.classList.toggle('open');
        arr.innerText = el.classList.contains('open') ? "‚ñ≤" : "‚ñº";
    }

    function saveNote(id) {
        const val = document.getElementById('note-'+id).value;
        userBackstage.sektorNotizen[id] = val;
        saveToStorage();
        alert("Im Buckel des Frosches gesichert, Schwein!");
    }

    function portalZuEbene4() {
        if (!userBackstage.isVerifiziert) { alert("Nur f√ºr verifizierte Seelen!"); return; }
        setEbene(4);
        if (jitsiApi) jitsiApi.dispose();
        jitsiApi = new JitsiMeetExternalAPI("8x8.vc", {
            roomName: "MM-Sektor-" + tId,
            width: "100%", height: "100%",
            parentNode: document.querySelector('#jitsi-container'),
            userInfo: { displayName: 'Ober-Schwein' }
        });
    }

    function saveToStorage() { localStorage.setItem('mm_user_data', JSON.stringify(userBackstage)); }
    function showDashboard() { location.reload(); }
    function nextPage() { if (ebene < 4) setEbene(ebene + 1); }
    function adminUnlock() { if (prompt("Code?") === "frosch2026") { userBackstage.isVerifiziert = true; saveToStorage(); location.reload(); } }

    window.onload = initApp;
</script>
</body>
</html>
