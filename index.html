<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>M&M-COMMUNITY - Admin Modus</title>
    <style>
        /* BASIS-LAYOUT - Schraube 1: Scrollen erlaubt */
        body { 
            background-color: #000; 
            color: #fff; 
            font-family: 'Segoe UI', Arial, sans-serif; 
            margin: 0; 
            padding: 0; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            min-height: 100vh; 
            overflow-y: auto; 
        }

        /* ANIMATIONEN */
        @keyframes kenburns { 0% { transform: scale(1) translate(0, 0); } 50% { transform: scale(1.15) translate(-1%, -1%); } 100% { transform: scale(1) translate(0, 0); } }
        @keyframes fadeEffect { 0% { opacity: 0; } 15% { opacity: 0.4; } 85% { opacity: 0.4; } 100% { opacity: 0; } }
        @keyframes signalBlink { 0% { box-shadow: 0 0 5px #fff; opacity: 0.8; } 50% { box-shadow: 0 0 25px #fff, 0 0 35px #003d8f; opacity: 1; transform: scale(1.05); } 100% { box-shadow: 0 0 5px #fff; opacity: 0.8; } }
        .elite-aktiv { background-color: #ffd700 !important; box-shadow: 0 0 10px #ffd700; border: 2px solid #fff !important; cursor: pointer; }
        @keyframes pulsieren { 0% { opacity: 0.5; } 50% { opacity: 1; text-shadow: 0 0 10px #ffd700; } 100% { opacity: 0.5; } }
        .pulsieren { animation: pulsieren 2s infinite ease-in-out; font-weight: bold; }
        .signal-aktiv { animation: signalBlink 1.0s infinite ease-in-out !important; border: 2px solid #fff !important; cursor: pointer; }

        /* LILA BALKEN */
        .lila-registrierung-leiste { width: 100%; height: 80px; background: #8b00ff; border-top: 2px solid #fff; border-bottom: 2px solid #fff; display: flex; align-items: center; justify-content: center; margin-top: 20px; box-shadow: 0 0 20px #8b00ff; }
        .registrierung-text { color: #fff; font-size: 2.2rem; font-weight: 900; letter-spacing: 15px; text-transform: uppercase; }

        /* HEADER & TAFEL */
        .dashboard-header { width: 100%; position: absolute; top: 3%; display: flex; justify-content: flex-start; padding: 0 2%; box-sizing: border-box; z-index: 20; }
        .logo-ring { width: 110px; height: 110px; border: 3px solid #fff; background-color: #003d8f; border-radius: 50%; display: flex; flex-direction: column; justify-content: center; align-items: center; cursor: pointer; }
        .logo-mm { font-size: 2rem; font-weight: 900; line-height: 0.8; }
        .logo-community { font-size: 0.6rem; letter-spacing: 1.5px; text-transform: uppercase; font-weight: bold; }
        .info-section { width: 80%; height: 26vh; border: 2px solid #003d8f; display: flex; flex-direction: column; justify-content: center; align-items: center; background-color: #000; position: relative; overflow: hidden; margin-top: 2vh; }
        
        .tafel-layout { display: flex; align-items: center; justify-content: center; width: 100%; position: relative; margin-top: 1vh; height: 26vh; min-height: 26vh; flex-shrink: 0; }
        .info-section-ebene { width: 90% !important; height: 100%; border: 2px solid #003d8f; background-color: #000; position: relative; overflow: hidden; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 10; }

        /* BUTTONS */
        .buttons-links { position: absolute; left: 1.5%; display: flex; flex-direction: column; gap: 15px; z-index: 20; }
        .buttons-rechts { position: absolute; right: 1.5%; display: flex; flex-direction: column; gap: 15px; z-index: 20; }
        .oval-side { width: 45px; height: 22px; border-radius: 12px; border: 1px solid #fff; opacity: 0.8; transition: all 0.3s; }
        .ov-schwarz { background: #000; border: 1.5px solid #003d8f; }
        .ov-grun { background: #00ff00; }
        .ov-blau { background: #0000ff; }
        .ov-rot { background: #ff0000; }
        .ov-pink { background: #ff00ff; }
        .ov-gelb { background: #ffff00; }

        /* DASHBOARD GRID */
        .grid { display: grid; grid-template-columns: repeat(4, 1fr); grid-template-rows: repeat(5, 1fr); grid-auto-flow: column; gap: 10px; width: 95%; max-width: 1450px; margin-top: 30px; border: 3px solid #00ff00; padding: 15px; border-radius: 10px; }
        .box, .fundament-box { display: flex; border: 2px solid #003d8f; background-color: #000; min-height: 58px; position: relative; overflow: hidden; }
        .num { width: 38px; display: flex; align-items: center; justify-content: center; background-color: #003d8f; font-weight: bold; flex-shrink: 0; font-size: 0.85rem; }
        .text { padding: 4px 8px; text-transform: uppercase; font-size: 0.6rem; display: flex; align-items: center; cursor: pointer; flex-grow: 1; font-weight: 600; }

        /* EBENE 3 */
        #chat-area { width: 90% !important; height: 45vh; flex-grow: 1; display: none; flex-direction: column; margin: 0 auto 70px auto; position: relative; overflow: hidden; border: none !important; }
        .chat-msgs { flex: 1; display: flex; flex-direction: column; justify-content: flex-end; padding: 10px 0; color: #fff; font-size: 1.1rem; overflow-y: auto; scrollbar-width: none; }
        .chat-input-row { display: flex; border: 1px solid #003d8f; background: rgba(0, 0, 0, 0.9); padding: 5px; border-radius: 4px; flex-shrink: 0; margin-top: 5px; z-index: 10; }

        /* EBENE 4 & SCHUBLADEN - Schraube 2 & 3: Freie Zonen */
        #drawer-ebene4 { width: 90%; display: none; flex-direction: column; padding-bottom: 150px; overflow: visible; }
        .schublade { border: 1px solid #003d8f; margin-bottom: 5px; background: #000; width: 100%; }
        .schublade-header { padding: 12px; background: #001a3d; cursor: pointer; display: flex; justify-content: space-between; }
        .schublade-content { max-height: 0; overflow: hidden; transition: max-height 0.3s; }
        .schublade.open .schublade-content { max-height: none; padding: 15px; border-top: 1px solid #003d8f; }

        .freie-zone { border: 1px dashed #444; padding: 20px; margin: 10px 0; text-align: center; color: #666; }

        .video-grid { display: grid; grid-template-columns: repeat(4, 2fr); gap: 10px; margin-bottom: 20px; }
        .video-slot { height: 100px; border: 1px solid #333; display: flex; align-items: center; justify-content: center; font-size: 0.6rem; }

        /* PAGE SKELETT */
        #page-skelett { display: none; width: 100%; flex-direction: column; align-items: center; min-height: 100vh; }

        /* NAV */
        .bottom-nav { display: flex; justify-content: space-between; width: 100%; padding: 10px 20px; position: fixed; bottom: 0; left: 0; box-sizing: border-box; background: #000; z-index: 100; border-top: 1px solid #333; }
        .nav-btn { background: #ffd700; color: #000; border: none; padding: 10px 20px; font-weight: bold; cursor: pointer; border-radius: 5px; }
        .dot { width: 10px; height: 10px; background: #444; border-radius: 50%; }
        .dot.active { background: #ffd700; box-shadow: 0 0 10px #ffd700; }

        #counter-box { position: absolute; right: 0; top: 0; width: 100px; padding: 5px; border-left: 2px solid #003d8f; border-bottom: 2px solid #003d8f; background: #000; text-align: center; display: none; z-index: 100; }
        .counter-value { font-size: 0.85rem; font-weight: 900; color: #ff0000; }
        .ebene4-header-red { width: 90%; background: #ff0000; color: #fff; padding: 10px 0; text-align: center; font-weight: 900; font-size: 1.5rem; border-radius: 5px 5px 0 0; display: none; }
        
        .num-neutral { background-color: #003d8f !important; }
        .num-gelesen { background-color: #ffd700 !important; color: #000 !important; }
        .num-offen { background-color: #ff4d4d !important; }
        .num-fertig { background-color: #00ff00 !important; color: #000 !important; }
        .werbe-bild-bg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-size: cover; background-position: center; opacity: 0; z-index: 1; }
        .bild-aktiv { animation: kenburns 20s infinite ease-in-out, fadeEffect 10s infinite; }
    </style>
</head>
<body>

    <div id="dashboard" style="width: 100%; display: flex; flex-direction: column; align-items: center;">
        <div class="dashboard-header">
            <div class="logo-ring" ondblclick="adminUnlock()"><div class="logo-mm">M&M</div><div class="logo-community">COMMUNITY</div></div>
        </div>
        <div class="info-section">
            <h1 style="font-size: 2.8rem; margin: 0; font-weight: 900;">DAS WAS & WARUM</h1>
            <h2 style="color: #003d8f; font-size: 1.8rem; margin: 5px 0;">DIE STILLE MILLION</h2>
            <p style="max-width: 85%; color: #ccc; font-size: 1.1rem; margin: 10px 0 0 0; text-align: center;">
                Die M&M-Community ist das Fundament für alle. <strong>Die Wahl der Vorsitzenden erfolgt erst nach Erreichen der stillen Million.</strong>
            </p>
        </div>
        
        <div class="grid" id="main-grid">
            <div class="box" id="box-0"><div class="num num-neutral" id="num-0">1</div><div class="text" onclick="checkAccess(0, 'Recht auf Gefühls Forderung')">Recht auf Gefühls Forderung</div></div>
            <div class="box" id="box-1"><div class="num num-neutral" id="num-1">2</div><div class="text" onclick="checkAccess(1, 'Wie werde ich Mensch')">Wie werde ich Mensch</div></div>
            <div class="box" id="box-2"><div class="num num-neutral" id="num-2">3</div><div class="text" onclick="checkAccess(2, 'Glaube an Friede')">Glaube an Friede</div></div>
            <div class="box" id="box-3"><div class="num num-neutral" id="num-3">4</div><div class="text" onclick="checkAccess(3, 'Programm für Bürgerliche Rechte')">Programm für Bürgerliche Rechte</div></div>
            <div class="box" id="box-4"><div class="num num-neutral" id="num-4">5</div><div class="text" onclick="checkAccess(4, 'Moralische Pflicht und Verantwortung')">Moralische Pflicht und Verantwortung</div></div>
            <div class="box" id="box-5"><div class="num num-neutral" id="num-5">6</div><div class="text" onclick="checkAccess(5, 'Menschlichkeit Wiederherstellung')">Menschlichkeit Wiederherstellung</div></div>
            <div class="box" id="box-6"><div class="num num-neutral" id="num-6">7</div><div class="text" onclick="checkAccess(6, 'Kinderschutz-Pflicht-Elternrechte')">Kinderschutz-Pflicht-Elternrechte</div></div>
            <div class="box" id="box-7"><div class="num num-neutral" id="num-7">8</div><div class="text" onclick="checkAccess(7, 'Wahre Richtung und Kunst')">Wahre Richtung und Kunst</div></div>
            <div class="box" id="box-8"><div class="num num-neutral" id="num-8">9</div><div class="text" onclick="checkAccess(8, 'LGBTQ und Kirche')">LGBTQ und Kirche</div></div>
            <div class="box" id="box-9"><div class="num num-neutral" id="num-9">10</div><div class="text" onclick="checkAccess(9, 'Trend and Tradition')">Trend and Tradition</div></div>
            <div class="box" id="box-10"><div class="num num-neutral" id="num-10">11</div><div class="text" onclick="checkAccess(10, 'Religionsbekenntnis oder Selbstwahl')">Religionsbekenntnis oder Selbstwahl</div></div>
            <div class="box" id="box-11"><div class="num num-neutral" id="num-11">12</div><div class="text" onclick="checkAccess(11, 'Gesundheitswesen und Verhalten')">Gesundheitswesen und Verhalten</div></div>
            <div class="box" id="box-12"><div class="num num-neutral" id="num-12">13</div><div class="text" onclick="checkAccess(12, 'Arbeitswelt und Du')">Arbeitswelt und Du</div></div>
            <div class="box" id="box-13"><div class="num num-neutral" id="num-13">14</div><div class="text" onclick="checkAccess(13, 'Mobbing am Arbeitsplatz')">Mobbing am Arbeitsplatz</div></div>
            <div class="box" id="box-14"><div class="num num-neutral" id="num-14">15</div><div class="text" onclick="checkAccess(14, 'Jugendsprecher')">Jugendsprecher</div></div>
            <div class="box" id="box-15"><div class="num num-neutral" id="num-15">16</div><div class="text" onclick="checkAccess(15, 'Ratgeber für Pensionisten')">Ratgeber für Pensionisten</div></div>
            <div class="box" id="box-16"><div class="num num-neutral" id="num-16">17</div><div class="text" onclick="checkAccess(16, 'Sozialgefallen und Widerkehr')">Sozialgefallen und Widerkehr</div></div>
            <div class="box" id="box-17"><div class="num num-neutral" id="num-17">18</div><div class="text" onclick="checkAccess(17, 'Nachbarschaft und Gemeinschaft')">Nachbarschaft und Gemeinschaft</div></div>
            <div class="box" id="box-18"><div class="num num-neutral" id="num-18">19</div><div class="text" onclick="checkAccess(18, 'Mensch und Technik')">Mensch und Technik</div></div>
            <div class="box" id="box-19"><div class="num num-neutral" id="num-19">20</div><div class="text" onclick="checkAccess(19, 'Die Brücke')">Die Brücke</div></div>
        </div>

        <div class="fundament-container" style="display: flex; width: 95%; max-width: 1450px; gap: 10px; margin-top: 10px; margin-bottom: 10px;">
            <div class="fundament-box" style="flex: 1;"><div class="num">21</div><div class="text">Kapital und Verwaltung</div></div>
            <div class="fundament-box" style="flex: 1;"><div class="num">22</div><div class="text">DAS KOLLEKTIV</div></div>
        </div>
        <div class="zugang-container" style="display: flex; width: 95%; max-width: 1450px; gap: 10px; margin-bottom: 80px;">
            <div class="fundament-box" style="flex: 1; border-color: #555; cursor: pointer;" onclick="showZugangInfo('gast')">
                <div class="num" style="background-color: #333;">G</div><div class="text">Gast-Zugang (Eingeschränkt)</div>
            </div>
            <div class="fundament-box" style="flex: 1; border-color: #8b00ff; cursor: pointer;" onclick="showZugangInfo('email')">
                <div class="num" style="background-color: #8b00ff;">V</div><div class="text" style="color: #ffd700;">Verifizierter Status (Voller Zugriff 1-4)</div>
            </div>
        </div>
    </div>

    <div id="page-skelett">
        <div class="top-container" style="width:100%; display:flex; flex-direction:column; align-items:center;">
            <h1 id="info-titel" class="page-title-white"></h1>
            <div id="ebene4-title-red" class="ebene4-header-red">DER VIDEO-BEWEIS</div>
            <div class="tafel-layout">
                <div class="buttons-links">
                    <div class="oval-side ov-schwarz" id="sig-l1"></div>
                    <div class="oval-side ov-grun" id="sig-l2"></div>
                    <div class="oval-side ov-blau" id="sig-l3"></div>
                    <div class="oval-side ov-rot" id="sig-l4" onclick="portalZuEbene4()"></div>
                </div>
                <div class="info-section-ebene">
                    <div class="werbe-bild-bg" id="werbe-bg"></div>
                    <div id="counter-box"><span style="font-size:0.4rem; color:#fff; display:block;">STILLE MILLION</span><span class="counter-value">842.336</span></div>
                    <div style="z-index: 5; text-align: center; font-weight: bold; color: rgba(255,255,255,0.3); letter-spacing: 5px;">PLATZ FÜR WERBUNG</div>
                </div>
                <div class="buttons-rechts">
                    <div class="oval-side ov-grun" id="sig-r1"></div>
                    <div class="oval-side ov-blau" id="sig-r2"></div>
                    <div class="oval-side ov-pink" id="sig-r3"></div>
                    <div class="oval-side ov-gelb" id="sig-r4" onclick="portalZuEbene3()"></div>
                </div>
            </div>
        </div>

        <p id="main-text" style="width: 85%; text-align: justify; color: #ccc; margin-top: 2vh; font-size: 1.3rem; line-height: 1.8;"></p>

        <div id="chat-area">
            <div class="chat-msgs" id="chat-box"></div>
            <div class="chat-input-row">
                <input type="text" id="chat-input" placeholder="Nachricht schreiben..." style="flex:1; background:transparent; border:none; color:#fff; padding:15px; outline:none;" onkeypress="if(event.key==='Enter') registriereSenden()">
                <button onclick="registriereSenden()" style="background:#003d8f; color:#fff; border:none; padding:0 30px; font-weight:bold; cursor:pointer;">SENDEN</button>
            </div>
        </div> 

        <div id="drawer-ebene4">
            <div class="video-grid">
                <div class="video-slot">SLOT 1 (DU)</div>
                <div class="video-slot">SLOT 2</div>
                <div class="video-slot">SLOT 3</div>
                <div class="video-slot">SLOT 4</div>
            </div>
            <button onclick="starteVideoKonferenz()" style="width: 100%; background: #00ff00; color: #000; border: none; padding: 12px; font-weight: bold; cursor: pointer; border-radius: 5px; margin-bottom: 20px;">JETZT ZUFÄLLIGEM DIALOG BEITRETEN</button>
            
            <div id="sektoren-schubladen">
                <div class="schublade" id="drawer-0">
                    <div class="schublade-header" onclick="toggleDrawer(0)"><span>SEKTOR 1: Recht auf Gefühls Forderung</span><span id="arrow-0">▼</span></div>
                    <div class="schublade-content">
                        <div class="freie-zone">FREIE ZONE: DOKUMENTE</div>
                        <p>Hier liegen die Beweise.</p>
                        <div class="freie-zone">FREIE ZONE: MULTIMEDIA</div>
                    </div>
                </div>
                </div>
        </div> 
    </div>

    <div class="bottom-nav">
        <button id="btn-back" class="nav-btn" style="visibility: hidden;" onclick="showDashboard()">← Dashboard</button>
        <div style="display: flex; gap: 8px; align-items: center;" id="dot-holder"></div>
        <button id="btn-next" class="nav-btn" style="visibility: hidden;" onclick="nextPage()">Weiter →</button>
    </div>

<script>
    // Script-Logik bleibt erhalten, da sie die Funktionen steuert
    let userBackstage = { isQualifiziert: false, isVerifiziert: false };
    const themen = ["Recht auf Gefühls Forderung", "Wie werde ich Mensch", "Glaube an Friede", "Programm für Bürgerliche Rechte", "Moralische Pflicht und Verantwortung", "Menschlichkeit Wiederherstellung", "Kinderschutz-Pflicht-Elternrechte", "Wahre Richtung und Kunst", "LGBTQ und Kirche", "Trend and Tradition", "Religionsbekenntnis oder Selbstwahl", "Gesundheitswesen und Verhalten", "Arbeitswelt und Du", "Mobbing am Arbeitsplatz", "Jugendsprecher", "Ratgeber für Pensionisten", "Sozialgefallen und Widerkehr", "Nachbarschaft und Gemeinschaft", "Mensch und Technik", "Die Brücke"];
    let ebene = 1, tId = 0, aktuellesThema = "", geleseneThemen = new Set(), interaktionsZaehler = {};
    themen.forEach((t, i) => { interaktionsZaehler[i] = 0; });

    // Funktionen wie gehabt...
    function toggleDrawer(id) {
        const d = document.getElementById(`drawer-${id}`);
        const isOpen = d.classList.contains('open');
        if (!isOpen) { d.classList.add('open'); } else { d.classList.remove('open'); }
    }

    function checkAccess(id, t) {
        showInfo(t, id);
    }

    function showInfo(t, id) { 
        tId = id; aktuellesThema = t; 
        ebene = 2; geleseneThemen.add(id);
        document.getElementById('dashboard').style.display = 'none'; 
        document.getElementById('page-skelett').style.display = 'flex'; 
        updateUI(); 
    }

    function updateUI() {
        document.getElementById('info-titel').innerText = aktuellesThema;
        document.getElementById('chat-area').style.display = (ebene === 3) ? 'flex' : 'none';
        document.getElementById('drawer-ebene4').style.display = (ebene === 4) ? 'flex' : 'none';
        document.getElementById('btn-back').style.visibility = 'visible';
        // Dots Update
        const dots = document.getElementById('dot-holder');
        dots.innerHTML = "";
        for(let i=1; i<=7; i++) dots.innerHTML += `<div class="dot ${i===ebene?'active':''}"></div>`;
    }

    function portalZuEbene3() { ebene = 3; updateUI(); }
    function portalZuEbene4() { ebene = 4; updateUI(); }
    function showDashboard() { ebene = 1; document.getElementById('page-skelett').style.display = 'none'; document.getElementById('dashboard').style.display = 'flex'; }
</script>
</body>
</html>
