<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>M&M-COMMUNITY - Das Fundament</title>
    <style>
        /* BASIS-LAYOUT */
        body { 
            background-color: #000; color: #fff; 
            font-family: 'Segoe UI', Arial, sans-serif; 
            margin: 0; padding: 0; 
            display: flex; flex-direction: column; align-items: center; 
            height: 100vh; overflow: hidden; 
        }

        /* ANIMATIONEN */
        @keyframes signalBlink {
            0% { box-shadow: 0 0 5px #fff; opacity: 0.8; }
            50% { box-shadow: 0 0 25px #fff, 0 0 35px #003d8f; opacity: 1; transform: scale(1.05); }
            100% { box-shadow: 0 0 5px #fff; opacity: 0.8; }
        }
        .signal-aktiv { animation: signalBlink 1.0s infinite ease-in-out !important; border: 2px solid #fff !important; cursor: pointer; }

        /* HEADER & LOGO */
        .dashboard-header { width: 100%; position: absolute; top: 3%; display: flex; justify-content: flex-start; padding: 0 2%; box-sizing: border-box; z-index: 20; }
        .logo-ring { width: 110px; height: 110px; border: 3px solid #fff; background-color: #003d8f; border-radius: 50%; display: flex; flex-direction: column; justify-content: center; align-items: center; cursor: pointer; }
        .logo-mm { font-size: 2rem; font-weight: 900; line-height: 0.8; }
        .logo-community { font-size: 0.6rem; letter-spacing: 1.5px; text-transform: uppercase; font-weight: bold; }

        /* GRID DASHBOARD */
        .grid { display: grid; grid-template-columns: repeat(4, 1fr); grid-template-rows: repeat(5, 1fr); gap: 10px; width: 95%; max-width: 1450px; margin-top: 30px; border: 3px solid #00ff00; padding: 15px; border-radius: 10px; }
        .box, .fundament-box { display: flex; border: 2px solid #003d8f; background-color: #000; min-height: 58px; position: relative; overflow: hidden; }
        .num { width: 38px; display: flex; align-items: center; justify-content: center; background-color: #003d8f; font-weight: bold; flex-shrink: 0; font-size: 0.85rem; }
        .text { padding: 4px 8px; text-transform: uppercase; font-size: 0.6rem; display: flex; align-items: center; cursor: pointer; flex-grow: 1; font-weight: 600; }

        /* EBENEN STATUS FARBEN */
        .num-neutral { background-color: #003d8f !important; }
        .num-gelesen { background-color: #ffd700 !important; color: #000 !important; }
        .num-fertig { background-color: #00ff00 !important; color: #000 !important; }

        /* TAFEL / INFO SECTION */
        .info-section { width: 80%; height: 26vh; border: 2px solid #003d8f; display: flex; flex-direction: column; justify-content: center; align-items: center; background-color: #000; position: relative; margin-top: 2vh; }
        .info-section-ebene { width: 90% !important; height: 100%; border: 2px solid #003d8f; background-color: #000; position: relative; display: flex; flex-direction: column; justify-content: center; align-items: center; }
        
        .buttons-links, .buttons-rechts { position: absolute; display: flex; flex-direction: column; gap: 15px; z-index: 20; }
        .buttons-links { left: 1.5%; } .buttons-rechts { right: 1.5%; }
        .oval-side { width: 45px; height: 22px; border-radius: 12px; border: 1px solid #fff; opacity: 0.8; }
        .ov-grun { background: #00ff00; } .ov-blau { background: #0000ff; } .ov-rot { background: #ff0000; } .ov-gelb { background: #ffff00; } .ov-pink { background: #ff00ff; }

        /* CHAT & EBENE 4/5 */
        #chat-area, #drawer-ebene4, #admin-ebene5 { width: 90% !important; flex-grow: 1; display: none; flex-direction: column; margin-top: 5px; margin-bottom: 70px; overflow-y: auto; }
        .chat-input-row { display: flex; border: 1px solid #003d8f; background: rgba(0,0,0,0.9); padding: 5px; }

        /* NAV */
        .bottom-nav { display: flex; justify-content: space-between; width: 100%; padding: 10px 20px; position: fixed; bottom: 0; background: #000; }
        .nav-btn { background: #ffd700; color: #000; border: none; padding: 10px 20px; font-weight: bold; cursor: pointer; border-radius: 5px; }
        .dot { width: 10px; height: 10px; background: #444; border-radius: 50%; }
        .dot.active { background: #ffd700; }
    </style>
</head>
<body>

    <div id="dashboard" style="width: 100%; display: flex; flex-direction: column; align-items: center;">
        <div class="dashboard-header">
            <div class="logo-ring" ondblclick="adminUnlock()"><div class="logo-mm">M&M</div><div class="logo-community">COMMUNITY</div></div>
        </div>
        <div class="info-section">
            <h1 style="font-size: 2.8rem; margin: 0; font-weight: 900;">DAS WAS & WARUM</h1>
            <h2 style="color: #003d8f; font-size: 1.8rem; margin: 5px 0;">DIE STILLE MILLION</h2>
        </div>
        <div class="grid" id="main-grid"></div>
        <div class="fundament-container" style="display: flex; width: 95%; max-width: 1450px; gap: 10px; margin-top: 10px;">
            <div class="fundament-box" style="flex: 1;"><div class="num">21</div><div class="text">Kapital und Verwaltung</div></div>
            <div class="fundament-box" style="flex: 1;"><div class="num">22</div><div class="text">DAS KOLLEKTIV (20+1+DU)</div></div>
        </div>
    </div>

    <div id="page-skelett" style="display: none; width: 100%; flex-direction: column; align-items: center; height: 100vh;">
        <h1 id="info-titel" style="text-transform: uppercase; font-size: 1.8rem; margin-top: 2vh;"></h1>
        
        <div class="info-section" style="width: 90%; height: 20vh;">
            <div class="buttons-links">
                <div class="oval-side ov-rot" id="sig-l4" onclick="portalZuEbene4()"></div>
            </div>
            <div class="info-section-ebene">
                <div id="admin-info" style="color: #ffd700; font-size: 0.8rem; display: none;">ADMIN-MODUS AKTIV</div>
                <div style="font-weight: bold; letter-spacing: 5px;">M&M COMMUNITY</div>
            </div>
            <div class="buttons-rechts">
                <div class="oval-side ov-gelb" id="sig-r4" onclick="portalZuEbene3()"></div>
            </div>
        </div>

        <p id="main-text" style="width: 85%; color: #ccc; text-align: justify;"></p>

        <div id="chat-area">
            <div id="chat-box" style="flex: 1; overflow-y: auto; padding: 10px;"></div>
            <div class="chat-input-row">
                <input type="text" id="chat-input" style="flex:1; background:transparent; color:#fff; border:none; padding:10px;">
                <button onclick="registriereSenden()" style="background:#003d8f; color:#fff; border:none; padding:10px 20px;">SENDEN</button>
            </div>
        </div>

        <div id="drawer-ebene4" style="text-align: center;">
            <h3>VIDEO-BEWEIS DER IDENTITÄT</h3>
            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; padding: 20px;">
                <div style="aspect-ratio: 16/9; background: #111; border: 1px solid #00ff00;">DEIN SLOT</div>
                <div style="aspect-ratio: 16/9; background: #111; border: 1px solid #333;">SLOT 2</div>
            </div>
        </div>

        <div id="admin-ebene5" style="background: #050505; border: 1px solid #ffd700; padding: 20px;">
            <h2 style="color: #ffd700;">EBENE 5: KANDIDATUR ZUM VORSTAND</h2>
            <p>Hier bereiten Schöpfer ihre Mission für das Kollektiv vor.</p>
            <textarea placeholder="Dein Plan für dieses Thema im Kollektiv..." style="width: 100%; height: 100px; background: #111; color: #fff; border: 1px solid #003d8f;"></textarea>
            <button style="margin-top: 10px; background: #ffd700; color: #000; padding: 10px; font-weight: bold; width: 100%;">ALS KANDIDAT REGISTRIEREN</button>
        </div>
    </div>

    <div class="bottom-nav">
        <button id="btn-back" class="nav-btn" onclick="showDashboard()">← Dashboard</button>
        <div id="dot-holder" style="display: flex; gap: 8px;"></div>
        <button id="btn-next" class="nav-btn" onclick="nextPage()">Weiter →</button>
    </div>

<script>
    const themen = [
        "Recht auf Gefühls Forderung", "Wie werde ich Mensch", "Glaube an Friede", "Programm für Bürgerliche Rechte",
        "Moralische Pflicht und Verantwortung", "Menschlichkeit Wiederherstellung", "Kinderschutz-Pflicht-Elternrechte",
        "Wahre Richtung und Kunst", "LGBTQ und Kirche", "Trend und Tradition", "Religionsbekenntnis oder Selbstwahl",
        "Gesundheitswesen und Verhalten", "Arbeitswelt und Du", "Mobbing am Arbeitsplatz", "Jugendsprecher",
        "Ratgeber für Pensionisten", "Sozialgefallen und Widerkehr", "Nachbarschaft und Gemeinschaft",
        "Mutter und Kind", "Die Brücke"
    ];

    let ebene = 1, tId = 0, isAdmin = false;
    let interaktionsZaehler = Array(20).fill(0);
    let geleseneThemen = new Set();

    // GRID INITIALISIEREN
    const grid = document.getElementById('main-grid');
    themen.forEach((t, i) => { 
        grid.innerHTML += `<div class="box"><div class="num num-neutral" id="num-${i}">${i+1}</div><div class="text" onclick="showInfo(${i})">${t}</div></div>`; 
    });

    const dots = document.getElementById('dot-holder');
    for(let i=1; i<=7; i++) dots.innerHTML += `<div id="dot${i}" class="dot ${i===1?'active':''}"></div>`;

    function adminUnlock() {
        isAdmin = true;
        themen.forEach((_, i) => { geleseneThemen.add(i); interaktionsZaehler[i] = 20; });
        document.getElementById('admin-info').style.display = 'block';
        updateNumColors();
        alert("ADMIN-MODUS: Barrierefreies Arbeiten aktiviert.");
    }

    function showInfo(id) {
        tId = id;
        ebene = 2;
        geleseneThemen.add(id);
        document.getElementById('dashboard').style.display = 'none';
        document.getElementById('page-skelett').style.display = 'flex';
        updateUI();
    }

    function updateUI() {
        document.getElementById('info-titel').innerText = themen[tId];
        document.getElementById('main-text').innerText = ebene === 2 ? "Inhalt zu " + themen[tId] + "..." : "";
        document.getElementById('main-text').style.display = ebene === 2 ? 'block' : 'none';
        
        document.getElementById('chat-area').style.display = ebene === 3 ? 'flex' : 'none';
        document.getElementById('drawer-ebene4').style.display = ebene === 4 ? 'block' : 'none';
        document.getElementById('admin-ebene5').style.display = (ebene === 5 && isAdmin) ? 'block' : 'none';

        // Signale
        const sigGelb = document.getElementById('sig-r4');
        const sigRot = document.getElementById('sig-l4');
        sigGelb.classList.toggle('signal-aktiv', (ebene === 2 && geleseneThemen.size === 20));
        sigRot.classList.toggle('signal-aktiv', (ebene === 3 && interaktionsZaehler.every(v => v >= 20)));

        updateDots();
    }

    function nextPage() {
        if (ebene < 7) { ebene++; updateUI(); }
    }

    function showDashboard() {
        ebene = 1;
        document.getElementById('page-skelett').style.display = 'none';
        document.getElementById('dashboard').style.display = 'flex';
        updateNumColors();
    }

    function updateNumColors() {
        themen.forEach((_, i) => {
            const n = document.getElementById(`num-${i}`);
            if (interaktionsZaehler[i] >= 20) n.className = "num num-fertig";
            else if (geleseneThemen.has(i)) n.className = "num num-gelesen";
        });
    }

    function portalZuEbene3() { if (geleseneThemen.size === 20) { ebene = 3; updateUI(); } }
    function portalZuEbene4() { if (interaktionsZaehler.every(v => v >= 20)) { ebene = 4; updateUI(); } }

    function updateDots() {
        for(let i=1; i<=7; i++) document.getElementById('dot'+i).classList.toggle('active', i === ebene);
    }
</script>
</body>
</html>
